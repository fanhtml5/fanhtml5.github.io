!function(){var e,t,n,a,r="gyZX1NOevan0WZul+ulPZTBO+DSpWkm3y46qmyxMiQs=",o=["https://i0.hdslb.com/bfs/article/484c1e1a0c41d4482f6fc12113236a19d75fd3c3.png","https://pic3.zhimg.com/80/v2-a492fc0204ad0275e0b609ceac2dab10.png","https://upload-images.jianshu.io/upload_images/6294093-5a04090325c2d251.png","https://cdn.nlark.com/yuque/0/2021/png/1527627/1630661958032-f6610875-4a71-48ab-b1b3-a494f5adf893.png"];function c(e){return e.split("?")[0].replace(/[^/]+$/,"")}self.document?function(){var e=document.documentElement;function t(t){e.innerHTML=t}function n(){location.reload()}var a,i=document.currentScript,s=i.src;if(s){var u=navigator.serviceWorker;if(!u)return void t("Error: Service Worker is not supported");var f=u.register(s).catch((function(e){t(e.message)}));a=c(s)}else a=i.dataset.root;function h(e){e?crypto.subtle.digest("SHA-256",e).then((function(t){var o=new Uint8Array(t),c=btoa(String.fromCharCode.apply(null,o));if(r===c){var i,s,u,h=(i=new Uint32Array(e),s=new Uint8Array(3*i.length),u=0,i.forEach((function(e){s[u++]=e,s[u++]=e>>8,s[u++]=e>>16})),s);caches.delete(".web2img").then((function(){caches.open(".web2img").then((function(e){(function(e,t){var n=e.indexOf(13),r=e.subarray(0,n),o=(new TextDecoder).decode(r),c=JSON.parse(o),i=n+1,s=[];for(var u in c){var f=c[u];f["cache-control"]="max-age=60";var h=f["content-length"],d=e.subarray(i,i+h),p=new Request(a+u),l=new Response(d,{headers:f});s.push(t.put(p,l)),i+=h}return Promise.all(s)})(h,e).then((function(){f?f.then(n):n()}))}))}))}else m()})):m()}var d=function(e){var t=new Image;t.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0);var a=n.getImageData(0,0,t.width,t.height).data.buffer;parent.postMessage(a,"*",[a])},t.onerror=function(){parent.postMessage("","*")},t.crossOrigin=1,t.src=e.data},p=document.createElement("iframe");p.src="data:text/html,<script>onmessage="+d+"<\/script>",p.style.display="none",p.onload=m,e.appendChild(p);var l=p.contentWindow;function m(){var e=o.shift();e&&l.postMessage(e,"*")}self.onmessage=function(e){e.source===l&&h(e.data)}}():(n=location.href,a=c(n),setInterval((function(){("cache"in Request.prototype?fetch(n,{cache:"no-cache"}):fetch(n+"?t="+Date.now())).then((function(n){n.text().then((function(n){t!==n&&(t&&(e=1,console.log("update")),t=n)}))}))}),12e4),onfetch=function(n){var r=n.request;if(!r.url.indexOf(a)){var o;if(e&&"navigate"===r.mode)o=new Response('<script data-root="'+a+'">'+t+"<\/script>",{headers:{"content-type":"text/html"}}),e=0;else{var c=new URL(r.url).pathname.replace(/\/{2,}/g,"/").replace(/\/$/,"/index.html");o=caches.open(".web2img").then((function(e){return e.match(c).then((function(t){return t||e.match(a+"404.html").then((function(e){return e||new Response("file not found: "+c,{status:404})}))}))}))}n.respondWith(o)}})}();
