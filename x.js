!function(){var e="GdBpPnsR0O4zdmBZ0VEkOVBlqnOfgbeNbupUfTEwtGs=",n=["https://article.biliimg.com/bfs/article/119c318e1b8ffb66cd8c0c3ca25ae02a83e5627e.png","https://pica.zhimg.com/80/v2-7a93e21a920610609ceb10fd9a2e8cb4.png","https://upload-images.jianshu.io/upload_images/6294093-3d0ac956c3344725.png","https://cdn.nlark.com/yuque/0/2021/png/1527627/1631934350095-a2dc7542-4c9a-4dcc-98dc-ece84577f629.png"],t=120;function r(e){return e.split("?")[0].replace(/[^/]+$/,"")}self.document?function(){var a=document.documentElement;function o(e){var n=document.getElementsByTagName("noscript");n.length>0&&(e=n[0].innerHTML),a.innerHTML=e}var c=document.currentScript.src,i=navigator.serviceWorker;if(i){var s=r(c),u=function(e){var n=e.data,t=new Image;t.onload=function(){clearInterval(r);var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var a=e.getContext("2d");a.drawImage(t,0,0);var o=a.getImageData(0,0,t.width,t.height).data.buffer;2===n.privacy?parent.postMessage(o,"*",[o]):p(o)},t.onerror=function(){clearInterval(r),2===n.privacy?parent.postMessage("","*"):p()},1===n.privacy&&(t.referrerPolicy="no-referrer"),t.crossOrigin=1,t.src=n.url;var r=setTimeout((function(){console.log("[web2img] timeout:",n.url),t.onerror(),t.onerror=t.onload=null,t.src=""}),n.timeout)},l=document.createElement("iframe");l.src="data:text/html,<script>onmessage="+u+"<\/script>",l.style.display="none",l.onload=d,a.appendChild(l);var f=l.contentWindow;self.onmessage=function(e){e.source===f&&p(e.data)}}else o("Service Worker is not supported");function h(n,r){var a=[];if(!i.controller){var u=i.register(c)["catch"]((function(e){o(e.message)}));a.push(u)}var l=JSON.stringify({hash:e,time:Date.now()}),f=new Response(l);a.push([r.put(s+".cache-info",f)]);var h=function(e){var n=e.indexOf(13),r=e.subarray(0,n),a=(new TextDecoder).decode(r),o=JSON.parse(a),c=n+1;for(var i in o){var s=o[i],u=/\.html$/.test(i)?5:t;s["cache-control"]="max-age="+u;var l=+s["content-length"],f=e.subarray(c,c+l);o[i]=new Response(f,{headers:s}),c+=l}return o}(n);for(var p in h)f=h[p],a.push(r.put(s+p,f));Promise.all(a).then((function(){location.reload()}))}function p(n){n?crypto.subtle.digest("SHA-256",n).then((function(t){var r=new Uint8Array(t),a=btoa(String.fromCharCode.apply(null,r));if(e!==a)return console.warn("[web2img] bad hash. exp:",e,"but got:",a),void d();var o,c,i,s=(o=new Uint32Array(n),c=new Uint8Array(3*o.length),i=0,o.forEach((function(e){c[i++]=e,c[i++]=e>>8,c[i++]=e>>16})),c);caches["delete"](".web2img").then((function(){caches.open(".web2img").then((function(e){h(s,e)}))}))})):d()}function d(){var e=n.shift();if(e){var t={url:e,privacy:2,timeout:1e4};f.postMessage(t,"*")}else o("failed to load resources")}}():function(){var e,n=location.href.split("?")[0],t=r(n),a=1;function o(e){return caches.open(".web2img").then((function(n){return n.match(e)}))}function c(){o(t+".cache-info").then((function(t){t&&t.json().then((function(t){var r,a;Date.now()-t.time<12e4||("cache"in Request.prototype?(r=n,a={cache:"no-cache"}):r=n+"?t="+Date.now(),fetch(r,a).then((function(n){n.text().then((function(n){-1===n.indexOf(t.hash)&&(e=r,console.log("[web2img] new version found"))}))})))}))}))}function i(r){return caches.has(".web2img").then((function(a){if(a||(e=n),e&&"navigate"===r.mode){var c=new Response("<script src="+e+"><\/script>",{headers:{"content-type":"text/html"}});return e="",console.log("[web2img] updating"),c}return i=r.url,o(s=new URL(i).pathname.replace(/\/{2,}/g,"/").replace(/\/$/,"/index.html")).then((function(e){return e||o(t+"404.html").then((function(e){return e||new Response("file not found: "+s,{status:404})}))}));var i,s}))}setInterval(c,12e4),onfetch=function(e){a&&(a=0,c());var r=e.request;0===r.url.indexOf(t)&&0!==r.url.indexOf(n)&&e.respondWith(i(r))},oninstall=function(){skipWaiting()}}()}();
